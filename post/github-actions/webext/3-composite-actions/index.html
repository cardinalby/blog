<!doctype html><html prefix="og: http://ogp.me/ns#"><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Composite actions &#183; cardinalby</title><meta name=description content="In this part we will start with implementing composite actions, the base building blocks that are used in the workflows.
We save all created actions locally in the repo in .github/workflows/actions directory. Every action has own named directory and a single action.yml file in it.
build-test-pack action .github/workflows/actions/build-test-pack/action.yml :
name:&#34;Build, test and pack WebExtension&#34;description:&#34;Builds, tests, and packs extension dir into zip file&#34;inputs:doNotPackZip:description:'Set `true` to omit pack step'required:falseruns:using:&#34;composite&#34;steps:# Add additional build and test steps here- name:Validate manifest."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=generator content="Hugo 0.94.2"><meta name=robots content="index,follow"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Composite actions"><meta property="og:description" content="In this part we will start with implementing composite actions, the base building blocks that are used in the workflows.
We save all created actions locally in the repo in .github/workflows/actions directory. Every action has own named directory and a single action.yml file in it.
build-test-pack action .github/workflows/actions/build-test-pack/action.yml :
name:&#34;Build, test and pack WebExtension&#34;description:&#34;Builds, tests, and packs extension dir into zip file&#34;inputs:doNotPackZip:description:'Set `true` to omit pack step'required:falseruns:using:&#34;composite&#34;steps:# Add additional build and test steps here- name:Validate manifest."><meta property="og:type" content="article"><meta property="og:url" content="https://cardinalby.github.io/blog/post/github-actions/webext/3-composite-actions/"><link rel=stylesheet href=https://cardinalby.github.io/blog/dist/site.css><link rel=stylesheet href=https://cardinalby.github.io/blog/dist/syntax.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><base href=https://cardinalby.github.io/blog/><link rel="shortcut icon" type=image/jpg href=favicon.png><link rel=stylesheet href=css/custom.css></head><body><script async src="https://www.googletagmanager.com/gtag/js?id=G-S1HYRNQV86"></script>
<script>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S1HYRNQV86",{anonymize_ip:!0})}</script><div id=wrapper><header class=site-header><div class=container><div class=site-title-wrapper><h1 class=site-title><a href=https://cardinalby.github.io/blog/>Tech grumbling</a></h1><a class=button-square href=https://cardinalby.github.io/blog/index.xml aria-label=RSS><i class="fa fa-rss" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint=Github aria-label=Github href=https://github.com/cardinalby rel=me><i class="fa fa-github-alt" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint="Stack Overflow" aria-label="Stack Overflow" href=https://stackoverflow.com/users/1180397/cardinal rel=me><i class="fa fa-stack-overflow" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint=LinkedIn aria-label=LinkedIn href=https://www.linkedin.com/in/sergey-borodin/ rel=me><i class="fa fa-linkedin" aria-hidden=true></i></a></div><ul class=site-nav><li class=site-nav-item><a href=/blog/>Blog</a></li><li class=site-nav-item><a href=/blog/project/>Projects</a></li><li class=site-nav-item><a href=/blog/tags/>Tags</a></li><li class=site-nav-item><a href=/blog/page/about/>About</a></li></ul></div></header><div id=container><div class=container><article class=post-container itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class=post-title itemprop="name headline">Composite actions</h1><p class=post-date><span>Published <time datetime=2022-02-06 itemprop=datePublished>Feb 6, 2022</time></span>
<span>by</span>
<span itemscope itemprop=author itemtype=https://schema.org/Person><span itemprop=name><a href=https://github.com/cardinalby itemprop=url rel=author>cardinalby</a></span></span></p><p class="post-reading post-line"><span>Estimated reading time: 3 min</span></p></header><div class="post-content clearfix" itemprop=articleBody><img class=post-featured-image src=images/posts/github-actions/webext/title.png><div class=series-parts-block><div class=series-parts-title><div class=series-label>SERIES</div><div class=series-name><a href=/blog/series/releasing-webextension-using-github-actions>Releasing WebExtension using GitHub Actions</a></div></div><div class=series-part><span class=circled-number>1</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/1-introduction/>Introduction. Constants</a></div><div class=series-part><span class=circled-number>2</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/2-workflows-diagram/>Workflows diagram</a></div><div class="series-part current"><span class=circled-number>3</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/3-composite-actions/>Composite actions</a></div><div class=series-part><span class=circled-number>4</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/4-build-release-assets/>Build release assets</a></div><div class=series-part><span class=circled-number>5</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/5-publish-on-firefox-addons/>Publish on Firefox Add-ons</a></div><div class=series-part><span class=circled-number>6</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/6-publish-on-chrome-web-store/>Publish on Chrome Web Store</a></div><div class=series-part><span class=circled-number>7</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/7-google-api-refresh-token-expiration/>Don't let Google refresh token expire</a></div><div class=series-part><span class=circled-number>8</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/8-the-main-workflow/>The main workflow</a></div></div><h3 class=series-part-block-print-only>Post <b>3</b> of <b>8</b> in "Releasing WebExtension using GitHub Actions" series</h3><p>In this part we will start with implementing composite actions, the base building blocks that are used in the workflows.</p><p>We save all created actions locally in the repo in <code>.github/workflows/actions</code> directory. Every action has own named directory and a single <em>action.yml</em> file in it.</p><h1 id=_build-test-pack_-action><em>build-test-pack</em> action</h1><p><em>.github/workflows/actions/build-test-pack/action.yml</em> :</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Build, test and pack WebExtension&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Builds, tests, and packs extension dir into zip file&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>doNotPackZip</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;Set `true` to omit pack step&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>required</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>runs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>using</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;composite&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># Add additional build and test steps here</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Validate manifest.json of the extension</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>cardinalby/schema-validator-action@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>file</span><span class=p>:</span><span class=w> </span><span class=l>${{ env.EXTENSION_DIR }}manifest.json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>schema</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;https://json.schemastore.org/webextension.json&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Pack directory to zip</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>inputs.doNotPackZip != &#39;true&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>cardinalby/webext-buildtools-pack-extension-dir-action@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>extensionDir</span><span class=p>:</span><span class=w> </span><span class=l>${{ env.EXTENSION_DIR }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>zipFilePath</span><span class=p>:</span><span class=w> </span><span class=l>${{ env.ZIP_FILE_PATH }}</span><span class=w>
</span></span></span></code></pre></div><ul><li>It can pack or not pack <strong>zip</strong> depending on the input.</li><li>My extension doesn&rsquo;t have any build and test steps, so I put <em>manifest.json</em> schema validation instead of actual build and test steps. This post doesn&rsquo;t cover the topic of building and testing WebExtensions. But it&rsquo;s the place where these steps should be.</li><li>The action needs <em>ZIP_FILE_PATH</em> and <em>EXTENSION_DIR</em> environment variables to be set in the workflow.</li></ul><h1 id=_get-zip-asset_-action><em>get-zip-asset</em> action</h1><p>The next composite action we are going to create will be used in <strong><em>publish-on-chrome-webstore</em></strong> and <strong><em>publish-on-firefox-addons</em></strong> workflows. These workflows can be triggered:</p><ul><li>Manually on any tag or branch (a release may not exist)</li><li>Or by dispatching from <strong><em>publish-release-on-tag</em></strong> workflow. In this case a release with packed zip file exists.</li></ul><p>Both &ldquo;Firefox&rdquo; and &ldquo;Chrome&rdquo; workflows should handle these cases and download <strong>zip</strong> file from a release (if any) or build it on the spot. That is the duplicated logic that we extract to the composite action.</p><p><img src=images/posts/github-actions/webext/get-zip-action.png alt="get-zip action"></p><p><em>.github/workflows/actions/get-zip-asset/action.yml</em> :</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Obtain extension.zip asset&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Downloads or builds zip asset&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>githubToken</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>GitHub token</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>required</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>outputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>releaseUploadUrl</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>Release upload url, if exists</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.getRelease.outputs.upload_url }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>runs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>using</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;composite&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Get release</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>getRelease</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>github.ref_type == &#39;tag&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>cardinalby/git-get-release-action@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>GITHUB_TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>${{ inputs.githubToken }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>tag</span><span class=p>:</span><span class=w> </span><span class=l>${{ github.ref_name }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>doNotFailIfNotFound</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Find out zip asset id from assets JSON</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>steps.getRelease.outputs.assets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>readAssetIdFromRelease</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>cardinalby/js-eval-action@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ASSETS_JSON</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.getRelease.outputs.assets }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>ASSET_NAME</span><span class=p>:</span><span class=w> </span><span class=l>${{ env.ZIP_ASSET_NAME }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>expression</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          JSON.parse(env.ASSETS_JSON)
</span></span></span><span class=line><span class=cl><span class=sd>            .find(asset =&gt; asset.name == env.ZIP_ASSET_NAME)
</span></span></span><span class=line><span class=cl><span class=sd>            ?.id || &#39;&#39;</span><span class=w>          
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Download found zip release asset</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>downloadZipAsset</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>steps.readAssetIdFromRelease.outputs.result</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>cardinalby/download-release-asset-action@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class=l>${{ inputs.githubToken }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>assetId</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.readAssetIdFromRelease.outputs.result }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>targetPath</span><span class=p>:</span><span class=w> </span><span class=l>${{ env.ZIP_FILE_PATH }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build and pack zip</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>buildZip</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>steps.downloadZipAsset.outcome != &#39;success&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>./.github/workflows/actions/build-test-pack</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Upload zip file artifact</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>if</span><span class=p>:</span><span class=w> </span><span class=l>steps.buildZip.outcome == &#39;success&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/upload-artifact@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>${{ env.ZIP_FILE_NAME }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>${{ env.ZIP_FILE_PATH }}</span><span class=w>
</span></span></span></code></pre></div><ul><li><em>githubToken</em> input is needed because composite actions don&rsquo;t have access to secrets, and we have to pass them manually via inputs.</li><li><em>releaseUploadUrl</em> output is filled if release exists. It can be used in a calling workflow to upload release assets.</li><li>Searching for a release makes sense only if a workflow was triggered with <code>tag</code> <em>ref</em>. Passing <code>doNotFailIfNotFound: true</code> to
<a href=https://github.com/marketplace/actions/git-get-release-action target=_blank>cardinalby/git-get-release-action</a> prevents the step from failing the entire job if a release not found.</li><li>I use
<a href=https://github.com/marketplace/actions/js-eval-action target=_blank>js-eval-action</a> (that is generic JS interpreter action) to find <strong>zip</strong> asset in the release.</li><li>We build <strong>zip</strong> (calling the composite action we have just created) only if <code>steps.downloadZipAsset.outcome != 'success'</code>, i.e. in the case if ref is not <code>tag</code>, or release not found, or the release doesn&rsquo;t have <strong>zip</strong> asset.</li></ul><h1 id=not-a-composite-action>Not a composite action</h1><p>We have one more piece of code that will be duplicated around all jobs and workflows. I&rsquo;m talking about these steps we will add at the beginning of each job:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>cardinalby/export-env-action@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>envFile</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;./.github/workflows/constants.env&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>expand</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span></code></pre></div><p>This code:</p><ol><li>Checks out the repo.</li><li>Exports env variables from <em>./.github/workflows/constants.env</em> file (you can find its contents in the first post) to the job environment using
<a href=https://github.com/marketplace/actions/export-env-action target=_blank>export-env-action</a>.</li></ol><p>Unfortunately, we can&rsquo;t extract checkout step to a local composite action because to call local composite actions you need first checkout the repo with the composite actions ðŸ™‚. Thus, I decided that extracting the single <em>export-env-action</em> step doesn&rsquo;t make a big sense and left it as it is. In the following parts I will not draw attention to these steps at the beginning of each workflow.</p><div class=series-parts-block><div class=series-parts-title><div class=series-label>SERIES</div><div class=series-name><a href=/blog/series/releasing-webextension-using-github-actions>Releasing WebExtension using GitHub Actions</a></div></div><div class=series-part><span class=circled-number>1</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/1-introduction/>Introduction. Constants</a></div><div class=series-part><span class=circled-number>2</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/2-workflows-diagram/>Workflows diagram</a></div><div class="series-part current"><span class=circled-number>3</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/3-composite-actions/>Composite actions</a></div><div class=series-part><span class=circled-number>4</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/4-build-release-assets/>Build release assets</a></div><div class=series-part><span class=circled-number>5</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/5-publish-on-firefox-addons/>Publish on Firefox Add-ons</a></div><div class=series-part><span class=circled-number>6</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/6-publish-on-chrome-web-store/>Publish on Chrome Web Store</a></div><div class=series-part><span class=circled-number>7</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/7-google-api-refresh-token-expiration/>Don't let Google refresh token expire</a></div><div class=series-part><span class=circled-number>8</span>
<a href=https://cardinalby.github.io/blog/post/github-actions/webext/8-the-main-workflow/>The main workflow</a></div></div><h3 class=series-part-block-print-only>Post <b>3</b> of <b>8</b> in "Releasing WebExtension using GitHub Actions" series</h3></div><footer class="post-footer clearfix"><p class=post-tags><span>Tagged:</span>
<a href=/blog/tags/github-actions/>github-actions</a>,
<a href=/blog/tags/web-extension/>web-extension</a>,
<a href=/blog/tags/devops/>devops</a></p><div class=share></div></footer><div class=comments><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//https-cardinalby-github-io-blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div></div></div><footer class=footer><div class=container><div class=site-title-wrapper><h1 class=site-title><a href=https://cardinalby.github.io/blog/>Tech grumbling</a></h1><a class="button-square button-jump-top js-jump-top" href=# aria-label="Back to Top"><i class="fa fa-angle-up" aria-hidden=true></i></a></div><p class=footer-copyright><span>&copy; 2022 / Powered by <a href=https://gohugo.io/>Hugo</a></span></p></div></footer><script src=https://cardinalby.github.io/blog/js/jquery-1.11.3.min.js></script>
<script src=https://cardinalby.github.io/blog/js/jquery.fitvids.js></script>
<script src=https://cardinalby.github.io/blog/js/scripts.js></script>
<script src=js/copy-code-to-clipboard.js></script></body></html>